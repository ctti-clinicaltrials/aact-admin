<div class="container mt-4">
  <% if @paginated_mappings.any? %>
    <%= form_with url: mapping_index_path, method: :get, local: true, class: "mb-3" do %>
      <div>
        <%= submit_tag "Filter", class: "btn btn-primary", style: "width: 100px" %>
        <%= link_to "Clear Filters", mapping_index_path, class: "btn btn-secondary" %>
      </div>
      <table class="table table-striped table-bordered documentation-table">
        <thead class="thead-dark">
          <thead>
            <tr>
              <th>Active</th>
              <th>Table Name</th>
              <th>Column Name</th>
              <th>Data Type</th>
              <th>Nullable</th>
              <th>Description</th>
              <th>CTGov Data Point</th>
              <th>CTGov Section</th>
              <th>CTGov Module</th>
              <th>CTGov JSON Path</th>
              <th>CTGov Doc URL</th>
            </tr>
          </thead>
          <tr>
            <td><%= text_field_tag :active, params[:active], class: "form-control" %></td>
            <td><%= text_field_tag :table_name, params[:table_name], class: "form-control" %></td>
            <td><%= text_field_tag :column_name, params[:column_name], class: "form-control" %></td>
            <td><%= text_field_tag :data_type, params[:data_type], class: "form-control" %></td>
            <td><%= text_field_tag :nullable, params[:nullable], class: "form-control" %></td>
            <td><%= text_field_tag :description, params[:description], class: "form-control" %></td>
            <td><%= text_field_tag :ctgov_data_point_label, params[:ctgov_data_point_label], class: "form-control" %></td>
            <td><%= text_field_tag :ctgov_section, params[:ctgov_section], class: "form-control" %></td>
            <td><%= text_field_tag :ctgov_module, params[:ctgov_module], class: "form-control" %></td>
            <td><%= text_field_tag :ctgov_path, params[:ctgov_path], class: "form-control" %></td>
            <td><%= text_field_tag :ctgov_url_label, params[:ctgov_url_label], class: "form-control" %></td>
          </tr>
        </thead>
        <tbody>
          <% @paginated_mappings.each do |mapping| %>
            <tr>
              <td><%= mapping['active'] ? 'Yes' : 'No' %></td>
              <td><%= mapping['table_name'] %></td>
              <td><%= mapping['column_name'] %></td>
              <td><%= mapping['data_type'] %></td>
              <td><%= mapping['nullable'] %></td>
              <td><%= mapping['description'] || 'N/A' %></td>
              <td><%= mapping['ctgov_data_point_label'] || 'N/A' %></td>
              <td><%= mapping['ctgov_section'] || 'N/A' %></td>
              <td><%= mapping['ctgov_module'] || 'N/A' %></td>
              <td><%= mapping['ctgov_path'] || 'N/A' %></td>
              <td>
                <% if mapping['ctgov_url'] %>
                  <a href="<%= mapping['ctgov_url'] %>" title="<%= mapping['ctgov_url_label'] %>"><%= mapping['ctgov_url_label'] %></a>
                <% else %>
                  N/A
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% end %>
    <%= paginate @paginated_mappings, class: "pagination justify-content-center" %>
  <% else %>
    <div class="alert alert-info" role="alert">
      No mappings found.
    </div>
  <% end %>
</div>